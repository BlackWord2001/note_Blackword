# <center> 高级绑定 </center>

## 01 增加基础骨骼

__骨骼名称中英文对照表__

__English__ | __中文__
:--- | :---
ROOT| 根
HEAD | 头部
NECK | 脖子
CHEST | 胸部 
SPINE | 脊柱 
HIP | 臀部 
LEG | 腿
SHIN | 小腿
FOOT | 脚
TOE | 脚趾
SHOULDER | 肩膀
ARM | 臂 
FORARM | 前臂 
HAND | 手
FINGER | 手指
THUMB | 拇指

给角色增加最基本的骨骼，命名以“DEF”开头。以及手臂和腿的部分需要对称镜像的骨骼在名称最后加上`.L` 的后缀名，这样在（编辑模式）下全选骨骼，右键选择（对称）就能识别并创建出 `.R` 后缀的镜像骨骼。



↓ 绑定参考图

![图像](./Images/高级绑定P01-2.png)

↓ 脚骨骼侧面图

![图像](./Images/高级绑定P01-3.png)

↓ 手指

![图像](./Images/高级绑定P01-4.png)

↓ ROOT骨骼

> 绑定时一定要注意骨骼坐标轴的朝向，Z轴永远朝上或者朝前。
![图像](./Images/高级绑定P01-5.png)


↓ DEF骨骼最后完成的样子


正视图 | 侧视图
:---: | :---:
![图像](./Images/高级绑定P01-1.png) | ![图像](./Images/高级绑定P01-6.png)

## 02 骨骼分类

接下来就要使用（Bone Manager）插件对骨骼进行分类管理，

插件下载地址请查看：[Blender-插件.md](../Blender-插件.md)

这部分我们要做的很简单，只需要专门新建一个ROOT层，并选中ROOT骨骼点击右侧的圆圈“○”给放进去就ok了。

![图像](./Images/高级绑定P01-7.png)

## 03 TGT骨骼

因为绑定的模型可能会导入游戏引擎所以TGT骨骼是专门用来专门控制DEF骨骼的，相当于是一层控制器。

1. 第一步需要我们在（编辑模式）下把除了ROOT骨骼将DEF开头的骨骼全都选中按 <Kbd>Shift</Kbd> + <Kbd>D</Kbd> 复制一份。

2. 把复制出来的骨骼全部放到一个新的层级中，并把层级命名为TGT。

    ![图像](./Images/高级绑定P01-8.png)

3. 隐藏其他层就单独显示TGT骨骼层，然后将TGT层的骨骼全选，按下<Kbd>Ctrl</Kbd> + <Kbd>F2</Kbd> 进行批量重命名把DEF的前缀替换成TGT。

    ![图像](./Images/高级绑定P01-9.png)

4. 清除blender给我们创建的后缀，复制后的物体因为和原物体重名blender会给我们在名称末尾加上.001 .002 ...等编号，现在我们需要删除他。保险起见我们分两步操作

    > 先删除末尾的数字
    ![图像](./Images/高级绑定P01-10.png)

    > 再删除标点
    ![图像](./Images/高级绑定P01-11.png)

5. 然后就是把DEF捆绑在TGT上，这里我们使用约束修改器，先选择DEF再选中相应的TGT骨骼，按下<Kbd>Ctrl</Kbd> + <Kbd>Shift</Kbd> + <Kbd>C</Kbd> 选择（Copy Transforms）复制变换就好了，接下来就是体力活把所有DEF骨骼都绑到对应的TGT骨骼上。

    ![图像](./Images/高级绑定P01-12.png)

    ↓ 添加完（Copy Transforms）约束后就可以在DEF的约束面板看见它

    ![图像](./Images/高级绑定P01-13.png)

6. 在刷权重之前我们需要把ROOT和TGT开头的所有骨骼的（形变）全部关闭，要不然blender会给我们创建这些骨骼的定点组，我们只需要DEF骨骼驱动人物模型就可以了，因此我们并不需要这些顶点组。

    ![图像](./Images/高级绑定P01-14.png)

7. 先选中物体再加选骨骼按下 <Kbd>Ctrl</Kbd> + <Kbd>P</Kbd> 选择（附带空顶点组），就完成物体和骨骼的关联了
   
    ![图像](./Images/高级绑定P01-15.png)

    ↓ 顶点组的名称会和骨骼名称一模一样，简单的模型如机器人等关节分离的模型可以直接在这个面板中使用（指定）按钮创建权重。

    ![图像](./Images/高级绑定P01-16.png)

    （编辑模式）下打开顶点组权重选项，再选择对应的顶点组就能看到直观的权重影响范围。

    ![图像](./Images/高级绑定P01-17.png)

8. 刷权重部分省略....
   